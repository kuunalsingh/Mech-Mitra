{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"C:/mechmitra/mech-mitra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _regeneratorRuntime = require(\"C:/mechmitra/mech-mitra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _objectWithoutProperties = require(\"C:/mechmitra/mech-mitra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _asyncToGenerator = require(\"C:/mechmitra/mech-mitra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _defineProperty = require(\"C:/mechmitra/mech-mitra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _objectSpread = require(\"C:/mechmitra/mech-mitra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread2\");\n\nvar _excluded = [\"delay\"];\n\nvar _specialCharCallbackM;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.type = type;\nexports.specialCharMap = void 0;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"./utils\");\n\nvar _click = require(\"./click\");\n\nvar _navigationKey = require(\"./keys/navigation-key\"); // TODO: wrap in asyncWrapper\n\n\nvar modifierCallbackMap = _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, createModifierCallbackEntries({\n  name: 'shift',\n  key: 'Shift',\n  keyCode: 16,\n  modifierProperty: 'shiftKey'\n})), createModifierCallbackEntries({\n  name: 'ctrl',\n  key: 'Control',\n  keyCode: 17,\n  modifierProperty: 'ctrlKey'\n})), createModifierCallbackEntries({\n  name: 'alt',\n  key: 'Alt',\n  keyCode: 18,\n  modifierProperty: 'altKey'\n})), createModifierCallbackEntries({\n  name: 'meta',\n  key: 'Meta',\n  keyCode: 93,\n  modifierProperty: 'metaKey'\n})), {}, {\n  // capslock is inline because of the need to fire both keydown and keyup on use, while preserving the modifier state.\n  '{capslock}': function capslockOn(_ref) {\n    var currentElement = _ref.currentElement,\n        eventOverrides = _ref.eventOverrides;\n    var newEventOverrides = {\n      modifierCapsLock: true\n    };\n\n    _dom.fireEvent.keyDown(currentElement(), _objectSpread(_objectSpread({\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20\n    }, eventOverrides), newEventOverrides));\n\n    _dom.fireEvent.keyUp(currentElement(), _objectSpread(_objectSpread({\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20\n    }, eventOverrides), newEventOverrides));\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  },\n  '{/capslock}': function capslockOff(_ref2) {\n    var currentElement = _ref2.currentElement,\n        eventOverrides = _ref2.eventOverrides;\n    var newEventOverrides = {\n      modifierCapsLock: false\n    };\n\n    _dom.fireEvent.keyDown(currentElement(), _objectSpread(_objectSpread({\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20\n    }, eventOverrides), newEventOverrides));\n\n    _dom.fireEvent.keyUp(currentElement(), _objectSpread(_objectSpread({\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20\n    }, eventOverrides), newEventOverrides));\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }\n});\n\nvar specialCharMap = {\n  arrowLeft: '{arrowleft}',\n  arrowRight: '{arrowright}',\n  arrowDown: '{arrowdown}',\n  arrowUp: '{arrowup}',\n  enter: '{enter}',\n  escape: '{esc}',\n  delete: '{del}',\n  backspace: '{backspace}',\n  home: '{home}',\n  end: '{end}',\n  selectAll: '{selectall}',\n  space: '{space}',\n  whitespace: ' '\n};\nexports.specialCharMap = specialCharMap;\nvar specialCharCallbackMap = (_specialCharCallbackM = {}, _defineProperty(_specialCharCallbackM, specialCharMap.arrowLeft, (0, _navigationKey.navigationKey)('ArrowLeft')), _defineProperty(_specialCharCallbackM, specialCharMap.arrowRight, (0, _navigationKey.navigationKey)('ArrowRight')), _defineProperty(_specialCharCallbackM, specialCharMap.arrowDown, handleArrowDown), _defineProperty(_specialCharCallbackM, specialCharMap.arrowUp, handleArrowUp), _defineProperty(_specialCharCallbackM, specialCharMap.home, (0, _navigationKey.navigationKey)('Home')), _defineProperty(_specialCharCallbackM, specialCharMap.end, (0, _navigationKey.navigationKey)('End')), _defineProperty(_specialCharCallbackM, specialCharMap.enter, handleEnter), _defineProperty(_specialCharCallbackM, specialCharMap.escape, handleEsc), _defineProperty(_specialCharCallbackM, specialCharMap.delete, handleDel), _defineProperty(_specialCharCallbackM, specialCharMap.backspace, handleBackspace), _defineProperty(_specialCharCallbackM, specialCharMap.selectAll, handleSelectall), _defineProperty(_specialCharCallbackM, specialCharMap.space, handleSpace), _defineProperty(_specialCharCallbackM, specialCharMap.whitespace, handleSpace), _specialCharCallbackM);\n\nfunction wait(time) {\n  return new Promise(function (resolve) {\n    return setTimeout(function () {\n      return resolve();\n    }, time);\n  });\n} // this needs to be wrapped in the event/asyncWrapper for React's act and angular's change detection\n// depending on whether it will be async.\n\n\nfunction type(_x, _x2) {\n  return _type.apply(this, arguments);\n}\n\nfunction _type() {\n  _type = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(element, text) {\n    var _ref22,\n        _ref22$delay,\n        delay,\n        options,\n        result,\n        _args2 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _ref22 = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {}, _ref22$delay = _ref22.delay, delay = _ref22$delay === void 0 ? 0 : _ref22$delay, options = _objectWithoutProperties(_ref22, _excluded);\n\n            if (!(delay > 0)) {\n              _context2.next = 6;\n              break;\n            }\n\n            _context2.next = 4;\n            return (0, _dom.getConfig)().asyncWrapper( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return typeImpl(element, text, _objectSpread({\n                        delay: delay\n                      }, options));\n\n                    case 2:\n                      result = _context.sent;\n\n                    case 3:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            })));\n\n          case 4:\n            _context2.next = 7;\n            break;\n\n          case 6:\n            result = typeImpl(element, text, _objectSpread({\n              delay: delay\n            }, options));\n\n          case 7:\n            return _context2.abrupt(\"return\", result);\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _type.apply(this, arguments);\n}\n\nfunction typeImpl(_x3, _x4, _x5) {\n  return _typeImpl.apply(this, arguments);\n}\n\nfunction _typeImpl() {\n  _typeImpl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(element, text, _ref3) {\n    var delay, _ref3$skipClick, skipClick, _ref3$skipAutoClose, skipAutoClose, initialSelectionStart, initialSelectionEnd, range, currentElement, value, _ref24, selectionStart, selectionEnd, eventCallbacks, queueCallbacks, runCallbacks, _runCallbacks;\n\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _runCallbacks = function _runCallbacks3() {\n              _runCallbacks = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(callbacks) {\n                var eventOverrides, prevWasMinus, prevWasPeriod, prevValue, typedValue, _iterator, _step, callback, returnValue;\n\n                return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        eventOverrides = {};\n                        _iterator = _createForOfIteratorHelper(callbacks);\n                        _context3.prev = 2;\n\n                        _iterator.s();\n\n                      case 4:\n                        if ((_step = _iterator.n()).done) {\n                          _context3.next = 12;\n                          break;\n                        }\n\n                        callback = _step.value;\n\n                        if (!(delay > 0)) {\n                          _context3.next = 9;\n                          break;\n                        }\n\n                        _context3.next = 9;\n                        return wait(delay);\n\n                      case 9:\n                        if (!currentElement().disabled) {\n                          returnValue = callback({\n                            currentElement: currentElement,\n                            prevWasMinus: prevWasMinus,\n                            prevWasPeriod: prevWasPeriod,\n                            prevValue: prevValue,\n                            eventOverrides: eventOverrides,\n                            typedValue: typedValue\n                          });\n                          Object.assign(eventOverrides, returnValue == null ? void 0 : returnValue.eventOverrides);\n                          prevWasMinus = returnValue == null ? void 0 : returnValue.prevWasMinus;\n                          prevWasPeriod = returnValue == null ? void 0 : returnValue.prevWasPeriod;\n                          prevValue = returnValue == null ? void 0 : returnValue.prevValue;\n                          typedValue = returnValue == null ? void 0 : returnValue.typedValue;\n                        }\n\n                      case 10:\n                        _context3.next = 4;\n                        break;\n\n                      case 12:\n                        _context3.next = 17;\n                        break;\n\n                      case 14:\n                        _context3.prev = 14;\n                        _context3.t0 = _context3[\"catch\"](2);\n\n                        _iterator.e(_context3.t0);\n\n                      case 17:\n                        _context3.prev = 17;\n\n                        _iterator.f();\n\n                        return _context3.finish(17);\n\n                      case 20:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }\n                }, _callee3, null, [[2, 14, 17, 20]]);\n              }));\n              return _runCallbacks.apply(this, arguments);\n            };\n\n            runCallbacks = function _runCallbacks2(_x6) {\n              return _runCallbacks.apply(this, arguments);\n            };\n\n            queueCallbacks = function _queueCallbacks() {\n              var callbacks = [];\n              var remainingString = text;\n\n              while (remainingString) {\n                var _getNextCallback = getNextCallback(remainingString, skipAutoClose),\n                    callback = _getNextCallback.callback,\n                    newRemainingString = _getNextCallback.remainingString;\n\n                callbacks.push(callback);\n                remainingString = newRemainingString;\n              }\n\n              return callbacks;\n            };\n\n            delay = _ref3.delay, _ref3$skipClick = _ref3.skipClick, skipClick = _ref3$skipClick === void 0 ? false : _ref3$skipClick, _ref3$skipAutoClose = _ref3.skipAutoClose, skipAutoClose = _ref3$skipAutoClose === void 0 ? false : _ref3$skipAutoClose, initialSelectionStart = _ref3.initialSelectionStart, initialSelectionEnd = _ref3.initialSelectionEnd;\n\n            if (!element.disabled) {\n              _context4.next = 6;\n              break;\n            }\n\n            return _context4.abrupt(\"return\");\n\n          case 6:\n            if (!skipClick) (0, _click.click)(element);\n\n            if ((0, _utils.isContentEditable)(element) && document.getSelection().rangeCount === 0) {\n              range = document.createRange();\n              range.setStart(element, 0);\n              range.setEnd(element, 0);\n              document.getSelection().addRange(range);\n            } // The focused element could change between each event, so get the currently active element each time\n\n\n            currentElement = function currentElement() {\n              return (0, _utils.getActiveElement)(element.ownerDocument);\n            }; // by default, a new element has it's selection start and end at 0\n            // but most of the time when people call \"type\", they expect it to type\n            // at the end of the current input value. So, if the selection start\n            // and end are both the default of 0, then we'll go ahead and change\n            // them to the length of the current value.\n            // the only time it would make sense to pass the initialSelectionStart or\n            // initialSelectionEnd is if you have an input with a value and want to\n            // explicitely start typing with the cursor at 0. Not super common.\n\n\n            value = (0, _utils.getValue)(currentElement());\n            _ref24 = (0, _utils.getSelectionRange)(element), selectionStart = _ref24.selectionStart, selectionEnd = _ref24.selectionEnd;\n\n            if (value != null && selectionStart === 0 && selectionEnd === 0) {\n              (0, _utils.setSelectionRangeIfNecessary)(currentElement(), initialSelectionStart != null ? initialSelectionStart : value.length, initialSelectionEnd != null ? initialSelectionEnd : value.length);\n            }\n\n            eventCallbacks = queueCallbacks();\n            _context4.next = 15;\n            return runCallbacks(eventCallbacks);\n\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _typeImpl.apply(this, arguments);\n}\n\nfunction getNextCallback(remainingString, skipAutoClose) {\n  var modifierCallback = getModifierCallback(remainingString, skipAutoClose);\n\n  if (modifierCallback) {\n    return modifierCallback;\n  }\n\n  var specialCharCallback = getSpecialCharCallback(remainingString);\n\n  if (specialCharCallback) {\n    return specialCharCallback;\n  }\n\n  return getTypeCallback(remainingString);\n}\n\nfunction getModifierCallback(remainingString, skipAutoClose) {\n  var modifierKey = Object.keys(modifierCallbackMap).find(function (key) {\n    return remainingString.startsWith(key);\n  });\n\n  if (!modifierKey) {\n    return null;\n  }\n\n  var callback = modifierCallbackMap[modifierKey]; // if this modifier has an associated \"close\" callback and the developer\n  // doesn't close it themselves, then we close it for them automatically\n  // Effectively if they send in: '{alt}a' then we type: '{alt}a{/alt}'\n\n  if (!skipAutoClose && callback.closeName && !remainingString.includes(callback.closeName)) {\n    remainingString += callback.closeName;\n  }\n\n  remainingString = remainingString.slice(modifierKey.length);\n  return {\n    callback: callback,\n    remainingString: remainingString\n  };\n}\n\nfunction getSpecialCharCallback(remainingString) {\n  var specialChar = Object.keys(specialCharCallbackMap).find(function (key) {\n    return remainingString.startsWith(key);\n  });\n\n  if (!specialChar) {\n    return null;\n  }\n\n  return {\n    callback: specialCharCallbackMap[specialChar],\n    remainingString: remainingString.slice(specialChar.length)\n  };\n}\n\nfunction getTypeCallback(remainingString) {\n  var character = remainingString[0];\n\n  var callback = function callback(context) {\n    return typeCharacter(character, context);\n  };\n\n  return {\n    callback: callback,\n    remainingString: remainingString.slice(1)\n  };\n}\n\nfunction setSelectionRange(_ref4) {\n  var currentElement = _ref4.currentElement,\n      newValue = _ref4.newValue,\n      newSelectionStart = _ref4.newSelectionStart;\n  // if we *can* change the selection start, then we will if the new value\n  // is the same as the current value (so it wasn't programatically changed\n  // when the fireEvent.input was triggered).\n  // The reason we have to do this at all is because it actually *is*\n  // programmatically changed by fireEvent.input, so we have to simulate the\n  // browser's default behavior\n  var value = (0, _utils.getValue)(currentElement());\n\n  if (value === newValue) {\n    (0, _utils.setSelectionRangeIfNecessary)(currentElement(), newSelectionStart, newSelectionStart);\n  } else {\n    // If the currentValue is different than the expected newValue and we *can*\n    // change the selection range, than we should set it to the length of the\n    // currentValue to ensure that the browser behavior is mimicked.\n    (0, _utils.setSelectionRangeIfNecessary)(currentElement(), value.length, value.length);\n  }\n}\n\nfunction fireInputEventIfNeeded(_ref5) {\n  var currentElement = _ref5.currentElement,\n      newValue = _ref5.newValue,\n      newSelectionStart = _ref5.newSelectionStart,\n      eventOverrides = _ref5.eventOverrides;\n  var prevValue = (0, _utils.getValue)(currentElement());\n\n  if (!currentElement().readOnly && !(0, _utils.isClickableInput)(currentElement()) && newValue !== prevValue) {\n    if ((0, _utils.isContentEditable)(currentElement())) {\n      _dom.fireEvent.input(currentElement(), _objectSpread({\n        target: {\n          textContent: newValue\n        }\n      }, eventOverrides));\n    } else {\n      _dom.fireEvent.input(currentElement(), _objectSpread({\n        target: {\n          value: newValue\n        }\n      }, eventOverrides));\n    }\n\n    setSelectionRange({\n      currentElement: currentElement,\n      newValue: newValue,\n      newSelectionStart: newSelectionStart\n    });\n  }\n\n  return {\n    prevValue: prevValue\n  };\n}\n\nfunction typeCharacter(char, _ref6) {\n  var currentElement = _ref6.currentElement,\n      _ref6$prevWasMinus = _ref6.prevWasMinus,\n      prevWasMinus = _ref6$prevWasMinus === void 0 ? false : _ref6$prevWasMinus,\n      _ref6$prevWasPeriod = _ref6.prevWasPeriod,\n      prevWasPeriod = _ref6$prevWasPeriod === void 0 ? false : _ref6$prevWasPeriod,\n      _ref6$prevValue = _ref6.prevValue,\n      prevValue = _ref6$prevValue === void 0 ? '' : _ref6$prevValue,\n      _ref6$typedValue = _ref6.typedValue,\n      typedValue = _ref6$typedValue === void 0 ? '' : _ref6$typedValue,\n      eventOverrides = _ref6.eventOverrides;\n  var key = char; // TODO: check if this also valid for characters with diacritic markers e.g. úé etc\n\n  var keyCode = char.charCodeAt(0);\n  var nextPrevWasMinus, nextPrevWasPeriod;\n  var textToBeTyped = typedValue + char;\n\n  var keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyDownDefaultNotPrevented) {\n    var keyPressDefaultNotPrevented = _dom.fireEvent.keyPress(currentElement(), _objectSpread({\n      key: key,\n      keyCode: keyCode,\n      charCode: keyCode\n    }, eventOverrides));\n\n    if ((0, _utils.getValue)(currentElement()) != null && keyPressDefaultNotPrevented) {\n      var newEntry = char;\n\n      if (prevWasMinus) {\n        newEntry = \"-\".concat(char);\n      } else if (prevWasPeriod) {\n        newEntry = \"\".concat(prevValue, \".\").concat(char);\n      }\n\n      if ((0, _utils.isValidDateValue)(currentElement(), textToBeTyped)) {\n        newEntry = textToBeTyped;\n      }\n\n      var timeNewEntry = (0, _utils.buildTimeValue)(textToBeTyped);\n\n      if ((0, _utils.isValidInputTimeValue)(currentElement(), timeNewEntry)) {\n        newEntry = timeNewEntry;\n      }\n\n      var inputEvent = fireInputEventIfNeeded(_objectSpread(_objectSpread({}, (0, _utils.calculateNewValue)(newEntry, currentElement())), {}, {\n        eventOverrides: _objectSpread({\n          data: key,\n          inputType: 'insertText'\n        }, eventOverrides),\n        currentElement: currentElement\n      }));\n      prevValue = inputEvent.prevValue;\n\n      if ((0, _utils.isValidDateValue)(currentElement(), textToBeTyped)) {\n        _dom.fireEvent.change(currentElement(), {\n          target: {\n            value: textToBeTyped\n          }\n        });\n      }\n\n      fireChangeForInputTimeIfValid(currentElement, prevValue, timeNewEntry); // typing \"-\" into a number input will not actually update the value\n      // so for the next character we type, the value should be set to\n      // `-${newEntry}`\n      // we also preserve the prevWasMinus when the value is unchanged due\n      // to typing an invalid character (typing \"-a3\" results in \"-3\")\n      // same applies for the decimal character.\n\n      if (currentElement().type === 'number') {\n        var newValue = (0, _utils.getValue)(currentElement());\n\n        if (newValue === prevValue && newEntry !== '-') {\n          nextPrevWasMinus = prevWasMinus;\n        } else {\n          nextPrevWasMinus = newEntry === '-';\n        }\n\n        if (newValue === prevValue && newEntry !== '.') {\n          nextPrevWasPeriod = prevWasPeriod;\n        } else {\n          nextPrevWasPeriod = newEntry === '.';\n        }\n      }\n    }\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  return {\n    prevWasMinus: nextPrevWasMinus,\n    prevWasPeriod: nextPrevWasPeriod,\n    prevValue: prevValue,\n    typedValue: textToBeTyped\n  };\n}\n\nfunction fireChangeForInputTimeIfValid(currentElement, prevValue, timeNewEntry) {\n  if ((0, _utils.isValidInputTimeValue)(currentElement(), timeNewEntry) && prevValue !== timeNewEntry) {\n    _dom.fireEvent.change(currentElement(), {\n      target: {\n        value: timeNewEntry\n      }\n    });\n  }\n} // yes, calculateNewBackspaceValue and calculateNewValue look extremely similar\n// and you may be tempted to create a shared abstraction.\n// If you, brave soul, decide to so endevor, please increment this count\n// when you inevitably fail: 1\n\n\nfunction calculateNewBackspaceValue(element) {\n  var _ref7 = (0, _utils.getSelectionRange)(element),\n      selectionStart = _ref7.selectionStart,\n      selectionEnd = _ref7.selectionEnd;\n\n  var value = (0, _utils.getValue)(element);\n  var newValue, newSelectionStart;\n\n  if (selectionStart === null) {\n    // at the end of an input type that does not support selection ranges\n    // https://github.com/testing-library/user-event/issues/316#issuecomment-639744793\n    newValue = value.slice(0, value.length - 1);\n    newSelectionStart = selectionStart - 1;\n  } else if (selectionStart === selectionEnd) {\n    if (selectionStart === 0) {\n      // at the beginning of the input\n      newValue = value;\n      newSelectionStart = selectionStart;\n    } else if (selectionStart === value.length) {\n      // at the end of the input\n      newValue = value.slice(0, value.length - 1);\n      newSelectionStart = selectionStart - 1;\n    } else {\n      // in the middle of the input\n      newValue = value.slice(0, selectionStart - 1) + value.slice(selectionEnd);\n      newSelectionStart = selectionStart - 1;\n    }\n  } else {\n    // we have something selected\n    var firstPart = value.slice(0, selectionStart);\n    newValue = firstPart + value.slice(selectionEnd);\n    newSelectionStart = firstPart.length;\n  }\n\n  return {\n    newValue: newValue,\n    newSelectionStart: newSelectionStart\n  };\n}\n\nfunction calculateNewDeleteValue(element) {\n  var _ref8 = (0, _utils.getSelectionRange)(element),\n      selectionStart = _ref8.selectionStart,\n      selectionEnd = _ref8.selectionEnd;\n\n  var value = (0, _utils.getValue)(element);\n  var newValue;\n\n  if (selectionStart === null) {\n    // at the end of an input type that does not support selection ranges\n    // https://github.com/testing-library/user-event/issues/316#issuecomment-639744793\n    newValue = value;\n  } else if (selectionStart === selectionEnd) {\n    if (selectionStart === 0) {\n      // at the beginning of the input\n      newValue = value.slice(1);\n    } else if (selectionStart === value.length) {\n      // at the end of the input\n      newValue = value;\n    } else {\n      // in the middle of the input\n      newValue = value.slice(0, selectionStart) + value.slice(selectionEnd + 1);\n    }\n  } else {\n    // we have something selected\n    var firstPart = value.slice(0, selectionStart);\n    newValue = firstPart + value.slice(selectionEnd);\n  }\n\n  return {\n    newValue: newValue,\n    newSelectionStart: selectionStart\n  };\n}\n\nfunction createModifierCallbackEntries(_ref9) {\n  var _ref12;\n\n  var name = _ref9.name,\n      key = _ref9.key,\n      keyCode = _ref9.keyCode,\n      modifierProperty = _ref9.modifierProperty;\n  var openName = \"{\".concat(name, \"}\");\n  var closeName = \"{/\".concat(name, \"}\");\n\n  function open(_ref10) {\n    var currentElement = _ref10.currentElement,\n        eventOverrides = _ref10.eventOverrides;\n\n    var newEventOverrides = _defineProperty({}, modifierProperty, true);\n\n    _dom.fireEvent.keyDown(currentElement(), _objectSpread(_objectSpread({\n      key: key,\n      keyCode: keyCode,\n      which: keyCode\n    }, eventOverrides), newEventOverrides));\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }\n\n  open.closeName = closeName;\n\n  function close(_ref11) {\n    var currentElement = _ref11.currentElement,\n        eventOverrides = _ref11.eventOverrides;\n\n    var newEventOverrides = _defineProperty({}, modifierProperty, false);\n\n    _dom.fireEvent.keyUp(currentElement(), _objectSpread(_objectSpread({\n      key: key,\n      keyCode: keyCode,\n      which: keyCode\n    }, eventOverrides), newEventOverrides));\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }\n\n  return _ref12 = {}, _defineProperty(_ref12, openName, open), _defineProperty(_ref12, closeName, close), _ref12;\n}\n\nfunction handleEnter(_ref13) {\n  var currentElement = _ref13.currentElement,\n      eventOverrides = _ref13.eventOverrides;\n  var key = 'Enter';\n  var keyCode = 13;\n\n  var keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyDownDefaultNotPrevented) {\n    var keyPressDefaultNotPrevented = _dom.fireEvent.keyPress(currentElement(), _objectSpread({\n      key: key,\n      keyCode: keyCode,\n      charCode: keyCode\n    }, eventOverrides));\n\n    if (keyPressDefaultNotPrevented) {\n      if ((0, _utils.isClickableInput)(currentElement()) || // Links with href defined should handle Enter the same as a click\n      (0, _utils.isInstanceOfElement)(currentElement(), 'HTMLAnchorElement') && currentElement().href) {\n        _dom.fireEvent.click(currentElement(), _objectSpread({}, eventOverrides));\n      }\n\n      if (currentElement().tagName === 'TEXTAREA') {\n        var _ref14 = (0, _utils.calculateNewValue)('\\n', currentElement()),\n            newValue = _ref14.newValue,\n            newSelectionStart = _ref14.newSelectionStart;\n\n        _dom.fireEvent.input(currentElement(), _objectSpread({\n          target: {\n            value: newValue\n          },\n          inputType: 'insertLineBreak'\n        }, eventOverrides));\n\n        setSelectionRange({\n          currentElement: currentElement,\n          newValue: newValue,\n          newSelectionStart: newSelectionStart\n        });\n      }\n\n      if (currentElement().tagName === 'INPUT' && currentElement().form && (currentElement().form.querySelectorAll('input').length === 1 || currentElement().form.querySelector('input[type=\"submit\"]') || currentElement().form.querySelector('button[type=\"submit\"]'))) {\n        _dom.fireEvent.submit(currentElement().form);\n      }\n    }\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}\n\nfunction handleEsc(_ref15) {\n  var currentElement = _ref15.currentElement,\n      eventOverrides = _ref15.eventOverrides;\n  var key = 'Escape';\n  var keyCode = 27;\n\n  _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides)); // NOTE: Browsers do not fire a keypress on meta key presses\n\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}\n\nfunction handleDel(_ref16) {\n  var currentElement = _ref16.currentElement,\n      eventOverrides = _ref16.eventOverrides;\n  var key = 'Delete';\n  var keyCode = 46;\n\n  var keyPressDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyPressDefaultNotPrevented) {\n    fireInputEventIfNeeded(_objectSpread(_objectSpread({}, calculateNewDeleteValue(currentElement())), {}, {\n      eventOverrides: _objectSpread({\n        inputType: 'deleteContentForward'\n      }, eventOverrides),\n      currentElement: currentElement\n    }));\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}\n\nfunction handleBackspace(_ref17) {\n  var currentElement = _ref17.currentElement,\n      eventOverrides = _ref17.eventOverrides;\n  var key = 'Backspace';\n  var keyCode = 8;\n\n  var keyPressDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyPressDefaultNotPrevented) {\n    fireInputEventIfNeeded(_objectSpread(_objectSpread({}, calculateNewBackspaceValue(currentElement())), {}, {\n      eventOverrides: _objectSpread({\n        inputType: 'deleteContentBackward'\n      }, eventOverrides),\n      currentElement: currentElement\n    }));\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}\n\nfunction handleSelectall(_ref18) {\n  var currentElement = _ref18.currentElement;\n  currentElement().setSelectionRange(0, (0, _utils.getValue)(currentElement()).length);\n}\n\nfunction handleSpace(context) {\n  if ((0, _utils.isClickableInput)(context.currentElement())) {\n    handleSpaceOnClickable(context);\n    return;\n  }\n\n  typeCharacter(' ', context);\n}\n\nfunction handleSpaceOnClickable(_ref19) {\n  var currentElement = _ref19.currentElement,\n      eventOverrides = _ref19.eventOverrides;\n  var key = ' ';\n  var keyCode = 32;\n\n  var keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyDownDefaultNotPrevented) {\n    _dom.fireEvent.keyPress(currentElement(), _objectSpread({\n      key: key,\n      keyCode: keyCode,\n      charCode: keyCode\n    }, eventOverrides));\n  }\n\n  var keyUpDefaultNotPrevented = _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyDownDefaultNotPrevented && keyUpDefaultNotPrevented) {\n    _dom.fireEvent.click(currentElement(), _objectSpread({}, eventOverrides));\n  }\n}\n\nfunction handleArrowDown(_ref20) {\n  var currentElement = _ref20.currentElement,\n      eventOverrides = _ref20.eventOverrides;\n  var key = 'ArrowDown';\n  var keyCode = 40;\n\n  _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}\n\nfunction handleArrowUp(_ref21) {\n  var currentElement = _ref21.currentElement,\n      eventOverrides = _ref21.eventOverrides;\n  var key = 'ArrowUp';\n  var keyCode = 38;\n\n  _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}","map":{"version":3,"sources":["C:/mechmitra/mech-mitra/node_modules/@testing-library/user-event/dist/type.js"],"names":["Object","defineProperty","exports","value","type","specialCharMap","_dom","require","_utils","_click","_navigationKey","modifierCallbackMap","createModifierCallbackEntries","name","key","keyCode","modifierProperty","capslockOn","currentElement","eventOverrides","newEventOverrides","modifierCapsLock","fireEvent","keyDown","which","keyUp","capslockOff","arrowLeft","arrowRight","arrowDown","arrowUp","enter","escape","delete","backspace","home","end","selectAll","space","whitespace","specialCharCallbackMap","navigationKey","handleArrowDown","handleArrowUp","handleEnter","handleEsc","handleDel","handleBackspace","handleSelectall","handleSpace","wait","time","Promise","resolve","setTimeout","element","text","delay","options","getConfig","asyncWrapper","typeImpl","result","queueCallbacks","runCallbacks","callbacks","callback","disabled","returnValue","prevWasMinus","prevWasPeriod","prevValue","typedValue","assign","remainingString","getNextCallback","skipAutoClose","newRemainingString","push","skipClick","initialSelectionStart","initialSelectionEnd","click","isContentEditable","document","getSelection","rangeCount","range","createRange","setStart","setEnd","addRange","getActiveElement","ownerDocument","getValue","getSelectionRange","selectionStart","selectionEnd","setSelectionRangeIfNecessary","length","eventCallbacks","modifierCallback","getModifierCallback","specialCharCallback","getSpecialCharCallback","getTypeCallback","modifierKey","keys","find","startsWith","closeName","includes","slice","specialChar","character","context","typeCharacter","setSelectionRange","newValue","newSelectionStart","fireInputEventIfNeeded","readOnly","isClickableInput","input","target","textContent","char","charCodeAt","nextPrevWasMinus","nextPrevWasPeriod","textToBeTyped","keyDownDefaultNotPrevented","keyPressDefaultNotPrevented","keyPress","charCode","newEntry","isValidDateValue","timeNewEntry","buildTimeValue","isValidInputTimeValue","inputEvent","calculateNewValue","data","inputType","change","fireChangeForInputTimeIfValid","calculateNewBackspaceValue","firstPart","calculateNewDeleteValue","openName","open","close","isInstanceOfElement","href","tagName","form","querySelectorAll","querySelector","submit","handleSpaceOnClickable","keyUpDefaultNotPrevented"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,IAAR,GAAeA,IAAf;AACAF,OAAO,CAACG,cAAR,GAAyB,KAAK,CAA9B;;AAEA,IAAIC,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAAlB;;AAEA,IAAIC,MAAM,GAAGD,OAAO,CAAC,SAAD,CAApB;;AAEA,IAAIE,MAAM,GAAGF,OAAO,CAAC,SAAD,CAApB;;AAEA,IAAIG,cAAc,GAAGH,OAAO,CAAC,uBAAD,CAA5B,C,CAEA;;;AACA,IAAMI,mBAAmB,6EAAQC,6BAA6B,CAAC;AAC3DC,EAAAA,IAAI,EAAE,OADqD;AAE3DC,EAAAA,GAAG,EAAE,OAFsD;AAG3DC,EAAAA,OAAO,EAAE,EAHkD;AAI3DC,EAAAA,gBAAgB,EAAE;AAJyC,CAAD,CAArC,GAMpBJ,6BAA6B,CAAC;AAC/BC,EAAAA,IAAI,EAAE,MADyB;AAE/BC,EAAAA,GAAG,EAAE,SAF0B;AAG/BC,EAAAA,OAAO,EAAE,EAHsB;AAI/BC,EAAAA,gBAAgB,EAAE;AAJa,CAAD,CANT,GAYpBJ,6BAA6B,CAAC;AAC/BC,EAAAA,IAAI,EAAE,KADyB;AAE/BC,EAAAA,GAAG,EAAE,KAF0B;AAG/BC,EAAAA,OAAO,EAAE,EAHsB;AAI/BC,EAAAA,gBAAgB,EAAE;AAJa,CAAD,CAZT,GAkBpBJ,6BAA6B,CAAC;AAC/BC,EAAAA,IAAI,EAAE,MADyB;AAE/BC,EAAAA,GAAG,EAAE,MAF0B;AAG/BC,EAAAA,OAAO,EAAE,EAHsB;AAI/BC,EAAAA,gBAAgB,EAAE;AAJa,CAAD,CAlBT;AAwBvB;AACA,gBAAc,SAASC,UAAT,OAGX;AAAA,QAFDC,cAEC,QAFDA,cAEC;AAAA,QADDC,cACC,QADDA,cACC;AACD,QAAMC,iBAAiB,GAAG;AACxBC,MAAAA,gBAAgB,EAAE;AADM,KAA1B;;AAIAf,IAAAA,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AACEJ,MAAAA,GAAG,EAAE,UADP;AAEEC,MAAAA,OAAO,EAAE,EAFX;AAGES,MAAAA,KAAK,EAAE;AAHT,OAIKL,cAJL,GAKKC,iBALL;;AAQAd,IAAAA,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AACEJ,MAAAA,GAAG,EAAE,UADP;AAEEC,MAAAA,OAAO,EAAE,EAFX;AAGES,MAAAA,KAAK,EAAE;AAHT,OAIKL,cAJL,GAKKC,iBALL;;AAQA,WAAO;AACLD,MAAAA,cAAc,EAAEC;AADX,KAAP;AAGD,GApDsB;AAqDvB,iBAAe,SAASM,WAAT,QAGZ;AAAA,QAFDR,cAEC,SAFDA,cAEC;AAAA,QADDC,cACC,SADDA,cACC;AACD,QAAMC,iBAAiB,GAAG;AACxBC,MAAAA,gBAAgB,EAAE;AADM,KAA1B;;AAIAf,IAAAA,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AACEJ,MAAAA,GAAG,EAAE,UADP;AAEEC,MAAAA,OAAO,EAAE,EAFX;AAGES,MAAAA,KAAK,EAAE;AAHT,OAIKL,cAJL,GAKKC,iBALL;;AAQAd,IAAAA,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AACEJ,MAAAA,GAAG,EAAE,UADP;AAEEC,MAAAA,OAAO,EAAE,EAFX;AAGES,MAAAA,KAAK,EAAE;AAHT,OAIKL,cAJL,GAKKC,iBALL;;AAQA,WAAO;AACLD,MAAAA,cAAc,EAAEC;AADX,KAAP;AAGD;AAhFsB,EAAzB;;AAkFA,IAAMf,cAAc,GAAG;AACrBsB,EAAAA,SAAS,EAAE,aADU;AAErBC,EAAAA,UAAU,EAAE,cAFS;AAGrBC,EAAAA,SAAS,EAAE,aAHU;AAIrBC,EAAAA,OAAO,EAAE,WAJY;AAKrBC,EAAAA,KAAK,EAAE,SALc;AAMrBC,EAAAA,MAAM,EAAE,OANa;AAOrBC,EAAAA,MAAM,EAAE,OAPa;AAQrBC,EAAAA,SAAS,EAAE,aARU;AASrBC,EAAAA,IAAI,EAAE,QATe;AAUrBC,EAAAA,GAAG,EAAE,OAVgB;AAWrBC,EAAAA,SAAS,EAAE,aAXU;AAYrBC,EAAAA,KAAK,EAAE,SAZc;AAarBC,EAAAA,UAAU,EAAE;AAbS,CAAvB;AAeArC,OAAO,CAACG,cAAR,GAAyBA,cAAzB;AACA,IAAMmC,sBAAsB,uEACzBnC,cAAc,CAACsB,SADU,EACE,CAAC,GAAGjB,cAAc,CAAC+B,aAAnB,EAAkC,WAAlC,CADF,0CAEzBpC,cAAc,CAACuB,UAFU,EAEG,CAAC,GAAGlB,cAAc,CAAC+B,aAAnB,EAAkC,YAAlC,CAFH,0CAGzBpC,cAAc,CAACwB,SAHU,EAGEa,eAHF,0CAIzBrC,cAAc,CAACyB,OAJU,EAIAa,aAJA,0CAKzBtC,cAAc,CAAC8B,IALU,EAKH,CAAC,GAAGzB,cAAc,CAAC+B,aAAnB,EAAkC,MAAlC,CALG,0CAMzBpC,cAAc,CAAC+B,GANU,EAMJ,CAAC,GAAG1B,cAAc,CAAC+B,aAAnB,EAAkC,KAAlC,CANI,0CAOzBpC,cAAc,CAAC0B,KAPU,EAOFa,WAPE,0CAQzBvC,cAAc,CAAC2B,MARU,EAQDa,SARC,0CASzBxC,cAAc,CAAC4B,MATU,EASDa,SATC,0CAUzBzC,cAAc,CAAC6B,SAVU,EAUEa,eAVF,0CAWzB1C,cAAc,CAACgC,SAXU,EAWEW,eAXF,0CAYzB3C,cAAc,CAACiC,KAZU,EAYFW,WAZE,0CAazB5C,cAAc,CAACkC,UAbU,EAaGU,WAbH,yBAA5B;;AAgBA,SAASC,IAAT,CAAcC,IAAd,EAAoB;AAClB,SAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO;AAAA,WAAIC,UAAU,CAAC;AAAA,aAAMD,OAAO,EAAb;AAAA,KAAD,EAAkBF,IAAlB,CAAd;AAAA,GAAnB,CAAP;AACD,C,CAAC;AACF;;;SAGe/C,I;;;;;mEAAf,kBAAoBmD,OAApB,EAA6BC,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,gFAGI,EAHJ,wBACEC,KADF,EACEA,KADF,6BACU,CADV,iBAEKC,OAFL;;AAAA,kBASMD,KAAK,GAAG,CATd;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAUU,CAAC,GAAGnD,IAAI,CAACqD,SAAT,IAAsBC,YAAtB,wEAAmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACxBC,QAAQ,CAACN,OAAD,EAAUC,IAAV;AACrBC,wBAAAA,KAAK,EAALA;AADqB,yBAElBC,OAFkB,EADgB;;AAAA;AACvCI,sBAAAA,MADuC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAnC,GAVV;;AAAA;AAAA;AAAA;;AAAA;AAiBIA,YAAAA,MAAM,GAAGD,QAAQ,CAACN,OAAD,EAAUC,IAAV;AACfC,cAAAA,KAAK,EAALA;AADe,eAEZC,OAFY,EAAjB;;AAjBJ;AAAA,8CAuBSI,MAvBT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SA0BeD,Q;;;;;uEAAf,kBAAwBN,OAAxB,EAAiCC,IAAjC;AAAA,+MAyCWO,cAzCX,EAyDiBC,YAzDjB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uFAyDE,kBAA4BC,SAA5B;AAAA;;AAAA;AAAA;AAAA;AAAA;AACQ9C,wBAAAA,cADR,GACyB,EADzB;AAAA,+DAIyB8C,SAJzB;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAIaC,wBAAAA,QAJb;;AAAA,8BAKQT,KAAK,GAAG,CALhB;AAAA;AAAA;AAAA;;AAAA;AAAA,+BAKyBP,IAAI,CAACO,KAAD,CAL7B;;AAAA;AAOI,4BAAI,CAACvC,cAAc,GAAGiD,QAAtB,EAAgC;AACxBC,0BAAAA,WADwB,GACVF,QAAQ,CAAC;AAC3BhD,4BAAAA,cAAc,EAAdA,cAD2B;AAE3BmD,4BAAAA,YAAY,EAAZA,YAF2B;AAG3BC,4BAAAA,aAAa,EAAbA,aAH2B;AAI3BC,4BAAAA,SAAS,EAATA,SAJ2B;AAK3BpD,4BAAAA,cAAc,EAAdA,cAL2B;AAM3BqD,4BAAAA,UAAU,EAAVA;AAN2B,2BAAD,CADE;AAS9BxE,0BAAAA,MAAM,CAACyE,MAAP,CAActD,cAAd,EAA8BiD,WAAW,IAAI,IAAf,GAAsB,KAAK,CAA3B,GAA+BA,WAAW,CAACjD,cAAzE;AACAkD,0BAAAA,YAAY,GAAGD,WAAW,IAAI,IAAf,GAAsB,KAAK,CAA3B,GAA+BA,WAAW,CAACC,YAA1D;AACAC,0BAAAA,aAAa,GAAGF,WAAW,IAAI,IAAf,GAAsB,KAAK,CAA3B,GAA+BA,WAAW,CAACE,aAA3D;AACAC,0BAAAA,SAAS,GAAGH,WAAW,IAAI,IAAf,GAAsB,KAAK,CAA3B,GAA+BA,WAAW,CAACG,SAAvD;AACAC,0BAAAA,UAAU,GAAGJ,WAAW,IAAI,IAAf,GAAsB,KAAK,CAA3B,GAA+BA,WAAW,CAACI,UAAxD;AACD;;AArBL;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAzDF;AAAA;AAAA;;AAyDiBR,YAAAA,YAzDjB;AAAA;AAAA;;AAyCWD,YAAAA,cAzCX,8BAyC4B;AACxB,kBAAME,SAAS,GAAG,EAAlB;AACA,kBAAIS,eAAe,GAAGlB,IAAtB;;AAEA,qBAAOkB,eAAP,EAAwB;AACtB,uCAGIC,eAAe,CAACD,eAAD,EAAkBE,aAAlB,CAHnB;AAAA,oBACEV,QADF,oBACEA,QADF;AAAA,oBAEmBW,kBAFnB,oBAEEH,eAFF;;AAIAT,gBAAAA,SAAS,CAACa,IAAV,CAAeZ,QAAf;AACAQ,gBAAAA,eAAe,GAAGG,kBAAlB;AACD;;AAED,qBAAOZ,SAAP;AACD,aAvDH;;AACER,YAAAA,KADF,SACEA,KADF,0BAEEsB,SAFF,EAEEA,SAFF,gCAEc,KAFd,gDAGEH,aAHF,EAGEA,aAHF,oCAGkB,KAHlB,wBAIEI,qBAJF,SAIEA,qBAJF,EAKEC,mBALF,SAKEA,mBALF;;AAAA,iBAOM1B,OAAO,CAACY,QAPd;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAQE,gBAAI,CAACY,SAAL,EAAgB,CAAC,GAAGtE,MAAM,CAACyE,KAAX,EAAkB3B,OAAlB;;AAEhB,gBAAI,CAAC,GAAG/C,MAAM,CAAC2E,iBAAX,EAA8B5B,OAA9B,KAA0C6B,QAAQ,CAACC,YAAT,GAAwBC,UAAxB,KAAuC,CAArF,EAAwF;AAChFC,cAAAA,KADgF,GACxEH,QAAQ,CAACI,WAAT,EADwE;AAEtFD,cAAAA,KAAK,CAACE,QAAN,CAAelC,OAAf,EAAwB,CAAxB;AACAgC,cAAAA,KAAK,CAACG,MAAN,CAAanC,OAAb,EAAsB,CAAtB;AACA6B,cAAAA,QAAQ,CAACC,YAAT,GAAwBM,QAAxB,CAAiCJ,KAAjC;AACD,aAfH,CAeI;;;AAGIrE,YAAAA,cAlBR,GAkByB,SAAjBA,cAAiB;AAAA,qBAAM,CAAC,GAAGV,MAAM,CAACoF,gBAAX,EAA6BrC,OAAO,CAACsC,aAArC,CAAN;AAAA,aAlBzB,EAkBoF;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGM1F,YAAAA,KA5BR,GA4BgB,CAAC,GAAGK,MAAM,CAACsF,QAAX,EAAqB5E,cAAc,EAAnC,CA5BhB;AAAA,qBAgCM,CAAC,GAAGV,MAAM,CAACuF,iBAAX,EAA8BxC,OAA9B,CAhCN,EA8BIyC,cA9BJ,UA8BIA,cA9BJ,EA+BIC,YA/BJ,UA+BIA,YA/BJ;;AAkCE,gBAAI9F,KAAK,IAAI,IAAT,IAAiB6F,cAAc,KAAK,CAApC,IAAyCC,YAAY,KAAK,CAA9D,EAAiE;AAC/D,eAAC,GAAGzF,MAAM,CAAC0F,4BAAX,EAAyChF,cAAc,EAAvD,EAA2D8D,qBAAqB,IAAI,IAAzB,GAAgCA,qBAAhC,GAAwD7E,KAAK,CAACgG,MAAzH,EAAiIlB,mBAAmB,IAAI,IAAvB,GAA8BA,mBAA9B,GAAoD9E,KAAK,CAACgG,MAA3L;AACD;;AAEKC,YAAAA,cAtCR,GAsCyBrC,cAAc,EAtCvC;AAAA;AAAA,mBAuCQC,YAAY,CAACoC,cAAD,CAvCpB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAmFA,SAASzB,eAAT,CAAyBD,eAAzB,EAA0CE,aAA1C,EAAyD;AACvD,MAAMyB,gBAAgB,GAAGC,mBAAmB,CAAC5B,eAAD,EAAkBE,aAAlB,CAA5C;;AAEA,MAAIyB,gBAAJ,EAAsB;AACpB,WAAOA,gBAAP;AACD;;AAED,MAAME,mBAAmB,GAAGC,sBAAsB,CAAC9B,eAAD,CAAlD;;AAEA,MAAI6B,mBAAJ,EAAyB;AACvB,WAAOA,mBAAP;AACD;;AAED,SAAOE,eAAe,CAAC/B,eAAD,CAAtB;AACD;;AAED,SAAS4B,mBAAT,CAA6B5B,eAA7B,EAA8CE,aAA9C,EAA6D;AAC3D,MAAM8B,WAAW,GAAG1G,MAAM,CAAC2G,IAAP,CAAYhG,mBAAZ,EAAiCiG,IAAjC,CAAsC,UAAA9F,GAAG;AAAA,WAAI4D,eAAe,CAACmC,UAAhB,CAA2B/F,GAA3B,CAAJ;AAAA,GAAzC,CAApB;;AAEA,MAAI,CAAC4F,WAAL,EAAkB;AAChB,WAAO,IAAP;AACD;;AAED,MAAMxC,QAAQ,GAAGvD,mBAAmB,CAAC+F,WAAD,CAApC,CAP2D,CAOR;AACnD;AACA;;AAEA,MAAI,CAAC9B,aAAD,IAAkBV,QAAQ,CAAC4C,SAA3B,IAAwC,CAACpC,eAAe,CAACqC,QAAhB,CAAyB7C,QAAQ,CAAC4C,SAAlC,CAA7C,EAA2F;AACzFpC,IAAAA,eAAe,IAAIR,QAAQ,CAAC4C,SAA5B;AACD;;AAEDpC,EAAAA,eAAe,GAAGA,eAAe,CAACsC,KAAhB,CAAsBN,WAAW,CAACP,MAAlC,CAAlB;AACA,SAAO;AACLjC,IAAAA,QAAQ,EAARA,QADK;AAELQ,IAAAA,eAAe,EAAfA;AAFK,GAAP;AAID;;AAED,SAAS8B,sBAAT,CAAgC9B,eAAhC,EAAiD;AAC/C,MAAMuC,WAAW,GAAGjH,MAAM,CAAC2G,IAAP,CAAYnE,sBAAZ,EAAoCoE,IAApC,CAAyC,UAAA9F,GAAG;AAAA,WAAI4D,eAAe,CAACmC,UAAhB,CAA2B/F,GAA3B,CAAJ;AAAA,GAA5C,CAApB;;AAEA,MAAI,CAACmG,WAAL,EAAkB;AAChB,WAAO,IAAP;AACD;;AAED,SAAO;AACL/C,IAAAA,QAAQ,EAAE1B,sBAAsB,CAACyE,WAAD,CAD3B;AAELvC,IAAAA,eAAe,EAAEA,eAAe,CAACsC,KAAhB,CAAsBC,WAAW,CAACd,MAAlC;AAFZ,GAAP;AAID;;AAED,SAASM,eAAT,CAAyB/B,eAAzB,EAA0C;AACxC,MAAMwC,SAAS,GAAGxC,eAAe,CAAC,CAAD,CAAjC;;AAEA,MAAMR,QAAQ,GAAG,SAAXA,QAAW,CAAAiD,OAAO;AAAA,WAAIC,aAAa,CAACF,SAAD,EAAYC,OAAZ,CAAjB;AAAA,GAAxB;;AAEA,SAAO;AACLjD,IAAAA,QAAQ,EAARA,QADK;AAELQ,IAAAA,eAAe,EAAEA,eAAe,CAACsC,KAAhB,CAAsB,CAAtB;AAFZ,GAAP;AAID;;AAED,SAASK,iBAAT,QAIG;AAAA,MAHDnG,cAGC,SAHDA,cAGC;AAAA,MAFDoG,QAEC,SAFDA,QAEC;AAAA,MADDC,iBACC,SADDA,iBACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,MAAMpH,KAAK,GAAG,CAAC,GAAGK,MAAM,CAACsF,QAAX,EAAqB5E,cAAc,EAAnC,CAAd;;AAEA,MAAIf,KAAK,KAAKmH,QAAd,EAAwB;AACtB,KAAC,GAAG9G,MAAM,CAAC0F,4BAAX,EAAyChF,cAAc,EAAvD,EAA2DqG,iBAA3D,EAA8EA,iBAA9E;AACD,GAFD,MAEO;AACL;AACA;AACA;AACA,KAAC,GAAG/G,MAAM,CAAC0F,4BAAX,EAAyChF,cAAc,EAAvD,EAA2Df,KAAK,CAACgG,MAAjE,EAAyEhG,KAAK,CAACgG,MAA/E;AACD;AACF;;AAED,SAASqB,sBAAT,QAKG;AAAA,MAJDtG,cAIC,SAJDA,cAIC;AAAA,MAHDoG,QAGC,SAHDA,QAGC;AAAA,MAFDC,iBAEC,SAFDA,iBAEC;AAAA,MADDpG,cACC,SADDA,cACC;AACD,MAAMoD,SAAS,GAAG,CAAC,GAAG/D,MAAM,CAACsF,QAAX,EAAqB5E,cAAc,EAAnC,CAAlB;;AAEA,MAAI,CAACA,cAAc,GAAGuG,QAAlB,IAA8B,CAAC,CAAC,GAAGjH,MAAM,CAACkH,gBAAX,EAA6BxG,cAAc,EAA3C,CAA/B,IAAiFoG,QAAQ,KAAK/C,SAAlG,EAA6G;AAC3G,QAAI,CAAC,GAAG/D,MAAM,CAAC2E,iBAAX,EAA8BjE,cAAc,EAA5C,CAAJ,EAAqD;AACnDZ,MAAAA,IAAI,CAACgB,SAAL,CAAeqG,KAAf,CAAqBzG,cAAc,EAAnC;AACE0G,QAAAA,MAAM,EAAE;AACNC,UAAAA,WAAW,EAAEP;AADP;AADV,SAIKnG,cAJL;AAMD,KAPD,MAOO;AACLb,MAAAA,IAAI,CAACgB,SAAL,CAAeqG,KAAf,CAAqBzG,cAAc,EAAnC;AACE0G,QAAAA,MAAM,EAAE;AACNzH,UAAAA,KAAK,EAAEmH;AADD;AADV,SAIKnG,cAJL;AAMD;;AAEDkG,IAAAA,iBAAiB,CAAC;AAChBnG,MAAAA,cAAc,EAAdA,cADgB;AAEhBoG,MAAAA,QAAQ,EAARA,QAFgB;AAGhBC,MAAAA,iBAAiB,EAAjBA;AAHgB,KAAD,CAAjB;AAKD;;AAED,SAAO;AACLhD,IAAAA,SAAS,EAATA;AADK,GAAP;AAGD;;AAED,SAAS6C,aAAT,CAAuBU,IAAvB,SAOG;AAAA,MAND5G,cAMC,SANDA,cAMC;AAAA,iCALDmD,YAKC;AAAA,MALDA,YAKC,mCALc,KAKd;AAAA,kCAJDC,aAIC;AAAA,MAJDA,aAIC,oCAJe,KAIf;AAAA,8BAHDC,SAGC;AAAA,MAHDA,SAGC,gCAHW,EAGX;AAAA,+BAFDC,UAEC;AAAA,MAFDA,UAEC,iCAFY,EAEZ;AAAA,MADDrD,cACC,SADDA,cACC;AACD,MAAML,GAAG,GAAGgH,IAAZ,CADC,CACiB;;AAElB,MAAM/G,OAAO,GAAG+G,IAAI,CAACC,UAAL,CAAgB,CAAhB,CAAhB;AACA,MAAIC,gBAAJ,EAAsBC,iBAAtB;AACA,MAAMC,aAAa,GAAG1D,UAAU,GAAGsD,IAAnC;;AAEA,MAAMK,0BAA0B,GAAG7H,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AACjCJ,IAAAA,GAAG,EAAHA,GADiC;AAEjCC,IAAAA,OAAO,EAAPA,OAFiC;AAGjCS,IAAAA,KAAK,EAAET;AAH0B,KAI9BI,cAJ8B,EAAnC;;AAOA,MAAIgH,0BAAJ,EAAgC;AAC9B,QAAMC,2BAA2B,GAAG9H,IAAI,CAACgB,SAAL,CAAe+G,QAAf,CAAwBnH,cAAc,EAAtC;AAClCJ,MAAAA,GAAG,EAAHA,GADkC;AAElCC,MAAAA,OAAO,EAAPA,OAFkC;AAGlCuH,MAAAA,QAAQ,EAAEvH;AAHwB,OAI/BI,cAJ+B,EAApC;;AAOA,QAAI,CAAC,GAAGX,MAAM,CAACsF,QAAX,EAAqB5E,cAAc,EAAnC,KAA0C,IAA1C,IAAkDkH,2BAAtD,EAAmF;AACjF,UAAIG,QAAQ,GAAGT,IAAf;;AAEA,UAAIzD,YAAJ,EAAkB;AAChBkE,QAAAA,QAAQ,cAAOT,IAAP,CAAR;AACD,OAFD,MAEO,IAAIxD,aAAJ,EAAmB;AACxBiE,QAAAA,QAAQ,aAAMhE,SAAN,cAAmBuD,IAAnB,CAAR;AACD;;AAED,UAAI,CAAC,GAAGtH,MAAM,CAACgI,gBAAX,EAA6BtH,cAAc,EAA3C,EAA+CgH,aAA/C,CAAJ,EAAmE;AACjEK,QAAAA,QAAQ,GAAGL,aAAX;AACD;;AAED,UAAMO,YAAY,GAAG,CAAC,GAAGjI,MAAM,CAACkI,cAAX,EAA2BR,aAA3B,CAArB;;AAEA,UAAI,CAAC,GAAG1H,MAAM,CAACmI,qBAAX,EAAkCzH,cAAc,EAAhD,EAAoDuH,YAApD,CAAJ,EAAuE;AACrEF,QAAAA,QAAQ,GAAGE,YAAX;AACD;;AAED,UAAMG,UAAU,GAAGpB,sBAAsB,iCAAM,CAAC,GAAGhH,MAAM,CAACqI,iBAAX,EAA8BN,QAA9B,EAAwCrH,cAAc,EAAtD,CAAN;AACvCC,QAAAA,cAAc;AACZ2H,UAAAA,IAAI,EAAEhI,GADM;AAEZiI,UAAAA,SAAS,EAAE;AAFC,WAGT5H,cAHS,CADyB;AAMvCD,QAAAA,cAAc,EAAdA;AANuC,SAAzC;AAQAqD,MAAAA,SAAS,GAAGqE,UAAU,CAACrE,SAAvB;;AAEA,UAAI,CAAC,GAAG/D,MAAM,CAACgI,gBAAX,EAA6BtH,cAAc,EAA3C,EAA+CgH,aAA/C,CAAJ,EAAmE;AACjE5H,QAAAA,IAAI,CAACgB,SAAL,CAAe0H,MAAf,CAAsB9H,cAAc,EAApC,EAAwC;AACtC0G,UAAAA,MAAM,EAAE;AACNzH,YAAAA,KAAK,EAAE+H;AADD;AAD8B,SAAxC;AAKD;;AAEDe,MAAAA,6BAA6B,CAAC/H,cAAD,EAAiBqD,SAAjB,EAA4BkE,YAA5B,CAA7B,CArCiF,CAqCT;AACxE;AACA;AACA;AACA;AACA;;AAEA,UAAIvH,cAAc,GAAGd,IAAjB,KAA0B,QAA9B,EAAwC;AACtC,YAAMkH,QAAQ,GAAG,CAAC,GAAG9G,MAAM,CAACsF,QAAX,EAAqB5E,cAAc,EAAnC,CAAjB;;AAEA,YAAIoG,QAAQ,KAAK/C,SAAb,IAA0BgE,QAAQ,KAAK,GAA3C,EAAgD;AAC9CP,UAAAA,gBAAgB,GAAG3D,YAAnB;AACD,SAFD,MAEO;AACL2D,UAAAA,gBAAgB,GAAGO,QAAQ,KAAK,GAAhC;AACD;;AAED,YAAIjB,QAAQ,KAAK/C,SAAb,IAA0BgE,QAAQ,KAAK,GAA3C,EAAgD;AAC9CN,UAAAA,iBAAiB,GAAG3D,aAApB;AACD,SAFD,MAEO;AACL2D,UAAAA,iBAAiB,GAAGM,QAAQ,KAAK,GAAjC;AACD;AACF;AACF;AACF;;AAEDjI,EAAAA,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AACEJ,IAAAA,GAAG,EAAHA,GADF;AAEEC,IAAAA,OAAO,EAAPA,OAFF;AAGES,IAAAA,KAAK,EAAET;AAHT,KAIKI,cAJL;;AAOA,SAAO;AACLkD,IAAAA,YAAY,EAAE2D,gBADT;AAEL1D,IAAAA,aAAa,EAAE2D,iBAFV;AAGL1D,IAAAA,SAAS,EAATA,SAHK;AAILC,IAAAA,UAAU,EAAE0D;AAJP,GAAP;AAMD;;AAED,SAASe,6BAAT,CAAuC/H,cAAvC,EAAuDqD,SAAvD,EAAkEkE,YAAlE,EAAgF;AAC9E,MAAI,CAAC,GAAGjI,MAAM,CAACmI,qBAAX,EAAkCzH,cAAc,EAAhD,EAAoDuH,YAApD,KAAqElE,SAAS,KAAKkE,YAAvF,EAAqG;AACnGnI,IAAAA,IAAI,CAACgB,SAAL,CAAe0H,MAAf,CAAsB9H,cAAc,EAApC,EAAwC;AACtC0G,MAAAA,MAAM,EAAE;AACNzH,QAAAA,KAAK,EAAEsI;AADD;AAD8B,KAAxC;AAKD;AACF,C,CAAC;AACF;AACA;AACA;;;AAGA,SAASS,0BAAT,CAAoC3F,OAApC,EAA6C;AAC3C,cAGI,CAAC,GAAG/C,MAAM,CAACuF,iBAAX,EAA8BxC,OAA9B,CAHJ;AAAA,MACEyC,cADF,SACEA,cADF;AAAA,MAEEC,YAFF,SAEEA,YAFF;;AAIA,MAAM9F,KAAK,GAAG,CAAC,GAAGK,MAAM,CAACsF,QAAX,EAAqBvC,OAArB,CAAd;AACA,MAAI+D,QAAJ,EAAcC,iBAAd;;AAEA,MAAIvB,cAAc,KAAK,IAAvB,EAA6B;AAC3B;AACA;AACAsB,IAAAA,QAAQ,GAAGnH,KAAK,CAAC6G,KAAN,CAAY,CAAZ,EAAe7G,KAAK,CAACgG,MAAN,GAAe,CAA9B,CAAX;AACAoB,IAAAA,iBAAiB,GAAGvB,cAAc,GAAG,CAArC;AACD,GALD,MAKO,IAAIA,cAAc,KAAKC,YAAvB,EAAqC;AAC1C,QAAID,cAAc,KAAK,CAAvB,EAA0B;AACxB;AACAsB,MAAAA,QAAQ,GAAGnH,KAAX;AACAoH,MAAAA,iBAAiB,GAAGvB,cAApB;AACD,KAJD,MAIO,IAAIA,cAAc,KAAK7F,KAAK,CAACgG,MAA7B,EAAqC;AAC1C;AACAmB,MAAAA,QAAQ,GAAGnH,KAAK,CAAC6G,KAAN,CAAY,CAAZ,EAAe7G,KAAK,CAACgG,MAAN,GAAe,CAA9B,CAAX;AACAoB,MAAAA,iBAAiB,GAAGvB,cAAc,GAAG,CAArC;AACD,KAJM,MAIA;AACL;AACAsB,MAAAA,QAAQ,GAAGnH,KAAK,CAAC6G,KAAN,CAAY,CAAZ,EAAehB,cAAc,GAAG,CAAhC,IAAqC7F,KAAK,CAAC6G,KAAN,CAAYf,YAAZ,CAAhD;AACAsB,MAAAA,iBAAiB,GAAGvB,cAAc,GAAG,CAArC;AACD;AACF,GAdM,MAcA;AACL;AACA,QAAMmD,SAAS,GAAGhJ,KAAK,CAAC6G,KAAN,CAAY,CAAZ,EAAehB,cAAf,CAAlB;AACAsB,IAAAA,QAAQ,GAAG6B,SAAS,GAAGhJ,KAAK,CAAC6G,KAAN,CAAYf,YAAZ,CAAvB;AACAsB,IAAAA,iBAAiB,GAAG4B,SAAS,CAAChD,MAA9B;AACD;;AAED,SAAO;AACLmB,IAAAA,QAAQ,EAARA,QADK;AAELC,IAAAA,iBAAiB,EAAjBA;AAFK,GAAP;AAID;;AAED,SAAS6B,uBAAT,CAAiC7F,OAAjC,EAA0C;AACxC,cAGI,CAAC,GAAG/C,MAAM,CAACuF,iBAAX,EAA8BxC,OAA9B,CAHJ;AAAA,MACEyC,cADF,SACEA,cADF;AAAA,MAEEC,YAFF,SAEEA,YAFF;;AAIA,MAAM9F,KAAK,GAAG,CAAC,GAAGK,MAAM,CAACsF,QAAX,EAAqBvC,OAArB,CAAd;AACA,MAAI+D,QAAJ;;AAEA,MAAItB,cAAc,KAAK,IAAvB,EAA6B;AAC3B;AACA;AACAsB,IAAAA,QAAQ,GAAGnH,KAAX;AACD,GAJD,MAIO,IAAI6F,cAAc,KAAKC,YAAvB,EAAqC;AAC1C,QAAID,cAAc,KAAK,CAAvB,EAA0B;AACxB;AACAsB,MAAAA,QAAQ,GAAGnH,KAAK,CAAC6G,KAAN,CAAY,CAAZ,CAAX;AACD,KAHD,MAGO,IAAIhB,cAAc,KAAK7F,KAAK,CAACgG,MAA7B,EAAqC;AAC1C;AACAmB,MAAAA,QAAQ,GAAGnH,KAAX;AACD,KAHM,MAGA;AACL;AACAmH,MAAAA,QAAQ,GAAGnH,KAAK,CAAC6G,KAAN,CAAY,CAAZ,EAAehB,cAAf,IAAiC7F,KAAK,CAAC6G,KAAN,CAAYf,YAAY,GAAG,CAA3B,CAA5C;AACD;AACF,GAXM,MAWA;AACL;AACA,QAAMkD,SAAS,GAAGhJ,KAAK,CAAC6G,KAAN,CAAY,CAAZ,EAAehB,cAAf,CAAlB;AACAsB,IAAAA,QAAQ,GAAG6B,SAAS,GAAGhJ,KAAK,CAAC6G,KAAN,CAAYf,YAAZ,CAAvB;AACD;;AAED,SAAO;AACLqB,IAAAA,QAAQ,EAARA,QADK;AAELC,IAAAA,iBAAiB,EAAEvB;AAFd,GAAP;AAID;;AAED,SAASpF,6BAAT,QAKG;AAAA;;AAAA,MAJDC,IAIC,SAJDA,IAIC;AAAA,MAHDC,GAGC,SAHDA,GAGC;AAAA,MAFDC,OAEC,SAFDA,OAEC;AAAA,MADDC,gBACC,SADDA,gBACC;AACD,MAAMqI,QAAQ,cAAOxI,IAAP,MAAd;AACA,MAAMiG,SAAS,eAAQjG,IAAR,MAAf;;AAEA,WAASyI,IAAT,SAGG;AAAA,QAFDpI,cAEC,UAFDA,cAEC;AAAA,QADDC,cACC,UADDA,cACC;;AACD,QAAMC,iBAAiB,uBACpBJ,gBADoB,EACD,IADC,CAAvB;;AAIAV,IAAAA,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AACEJ,MAAAA,GAAG,EAAHA,GADF;AAEEC,MAAAA,OAAO,EAAPA,OAFF;AAGES,MAAAA,KAAK,EAAET;AAHT,OAIKI,cAJL,GAKKC,iBALL;;AAQA,WAAO;AACLD,MAAAA,cAAc,EAAEC;AADX,KAAP;AAGD;;AAEDkI,EAAAA,IAAI,CAACxC,SAAL,GAAiBA,SAAjB;;AAEA,WAASyC,KAAT,SAGG;AAAA,QAFDrI,cAEC,UAFDA,cAEC;AAAA,QADDC,cACC,UADDA,cACC;;AACD,QAAMC,iBAAiB,uBACpBJ,gBADoB,EACD,KADC,CAAvB;;AAIAV,IAAAA,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AACEJ,MAAAA,GAAG,EAAHA,GADF;AAEEC,MAAAA,OAAO,EAAPA,OAFF;AAGES,MAAAA,KAAK,EAAET;AAHT,OAIKI,cAJL,GAKKC,iBALL;;AAQA,WAAO;AACLD,MAAAA,cAAc,EAAEC;AADX,KAAP;AAGD;;AAED,8CACGiI,QADH,EACcC,IADd,2BAEGxC,SAFH,EAEeyC,KAFf;AAID;;AAED,SAAS3G,WAAT,SAGG;AAAA,MAFD1B,cAEC,UAFDA,cAEC;AAAA,MADDC,cACC,UADDA,cACC;AACD,MAAML,GAAG,GAAG,OAAZ;AACA,MAAMC,OAAO,GAAG,EAAhB;;AAEA,MAAMoH,0BAA0B,GAAG7H,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AACjCJ,IAAAA,GAAG,EAAHA,GADiC;AAEjCC,IAAAA,OAAO,EAAPA,OAFiC;AAGjCS,IAAAA,KAAK,EAAET;AAH0B,KAI9BI,cAJ8B,EAAnC;;AAOA,MAAIgH,0BAAJ,EAAgC;AAC9B,QAAMC,2BAA2B,GAAG9H,IAAI,CAACgB,SAAL,CAAe+G,QAAf,CAAwBnH,cAAc,EAAtC;AAClCJ,MAAAA,GAAG,EAAHA,GADkC;AAElCC,MAAAA,OAAO,EAAPA,OAFkC;AAGlCuH,MAAAA,QAAQ,EAAEvH;AAHwB,OAI/BI,cAJ+B,EAApC;;AAOA,QAAIiH,2BAAJ,EAAiC;AAC/B,UAAI,CAAC,GAAG5H,MAAM,CAACkH,gBAAX,EAA6BxG,cAAc,EAA3C,KAAkD;AACtD,OAAC,GAAGV,MAAM,CAACgJ,mBAAX,EAAgCtI,cAAc,EAA9C,EAAkD,mBAAlD,KAA0EA,cAAc,GAAGuI,IAD3F,EACiG;AAC/FnJ,QAAAA,IAAI,CAACgB,SAAL,CAAe4D,KAAf,CAAqBhE,cAAc,EAAnC,oBAA4CC,cAA5C;AAED;;AAED,UAAID,cAAc,GAAGwI,OAAjB,KAA6B,UAAjC,EAA6C;AAC3C,qBAGI,CAAC,GAAGlJ,MAAM,CAACqI,iBAAX,EAA8B,IAA9B,EAAoC3H,cAAc,EAAlD,CAHJ;AAAA,YACEoG,QADF,UACEA,QADF;AAAA,YAEEC,iBAFF,UAEEA,iBAFF;;AAKAjH,QAAAA,IAAI,CAACgB,SAAL,CAAeqG,KAAf,CAAqBzG,cAAc,EAAnC;AACE0G,UAAAA,MAAM,EAAE;AACNzH,YAAAA,KAAK,EAAEmH;AADD,WADV;AAIEyB,UAAAA,SAAS,EAAE;AAJb,WAKK5H,cALL;;AAQAkG,QAAAA,iBAAiB,CAAC;AAChBnG,UAAAA,cAAc,EAAdA,cADgB;AAEhBoG,UAAAA,QAAQ,EAARA,QAFgB;AAGhBC,UAAAA,iBAAiB,EAAjBA;AAHgB,SAAD,CAAjB;AAKD;;AAED,UAAIrG,cAAc,GAAGwI,OAAjB,KAA6B,OAA7B,IAAwCxI,cAAc,GAAGyI,IAAzD,KAAkEzI,cAAc,GAAGyI,IAAjB,CAAsBC,gBAAtB,CAAuC,OAAvC,EAAgDzD,MAAhD,KAA2D,CAA3D,IAAgEjF,cAAc,GAAGyI,IAAjB,CAAsBE,aAAtB,CAAoC,sBAApC,CAAhE,IAA+H3I,cAAc,GAAGyI,IAAjB,CAAsBE,aAAtB,CAAoC,uBAApC,CAAjM,CAAJ,EAAoQ;AAClQvJ,QAAAA,IAAI,CAACgB,SAAL,CAAewI,MAAf,CAAsB5I,cAAc,GAAGyI,IAAvC;AACD;AACF;AACF;;AAEDrJ,EAAAA,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AACEJ,IAAAA,GAAG,EAAHA,GADF;AAEEC,IAAAA,OAAO,EAAPA,OAFF;AAGES,IAAAA,KAAK,EAAET;AAHT,KAIKI,cAJL;AAMD;;AAED,SAAS0B,SAAT,SAGG;AAAA,MAFD3B,cAEC,UAFDA,cAEC;AAAA,MADDC,cACC,UADDA,cACC;AACD,MAAML,GAAG,GAAG,QAAZ;AACA,MAAMC,OAAO,GAAG,EAAhB;;AAEAT,EAAAA,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AACEJ,IAAAA,GAAG,EAAHA,GADF;AAEEC,IAAAA,OAAO,EAAPA,OAFF;AAGES,IAAAA,KAAK,EAAET;AAHT,KAIKI,cAJL,GAJC,CASG;;;AAGJb,EAAAA,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AACEJ,IAAAA,GAAG,EAAHA,GADF;AAEEC,IAAAA,OAAO,EAAPA,OAFF;AAGES,IAAAA,KAAK,EAAET;AAHT,KAIKI,cAJL;AAMD;;AAED,SAAS2B,SAAT,SAGG;AAAA,MAFD5B,cAEC,UAFDA,cAEC;AAAA,MADDC,cACC,UADDA,cACC;AACD,MAAML,GAAG,GAAG,QAAZ;AACA,MAAMC,OAAO,GAAG,EAAhB;;AAEA,MAAMqH,2BAA2B,GAAG9H,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AAClCJ,IAAAA,GAAG,EAAHA,GADkC;AAElCC,IAAAA,OAAO,EAAPA,OAFkC;AAGlCS,IAAAA,KAAK,EAAET;AAH2B,KAI/BI,cAJ+B,EAApC;;AAOA,MAAIiH,2BAAJ,EAAiC;AAC/BZ,IAAAA,sBAAsB,iCAAM4B,uBAAuB,CAAClI,cAAc,EAAf,CAA7B;AACpBC,MAAAA,cAAc;AACZ4H,QAAAA,SAAS,EAAE;AADC,SAET5H,cAFS,CADM;AAKpBD,MAAAA,cAAc,EAAdA;AALoB,OAAtB;AAOD;;AAEDZ,EAAAA,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AACEJ,IAAAA,GAAG,EAAHA,GADF;AAEEC,IAAAA,OAAO,EAAPA,OAFF;AAGES,IAAAA,KAAK,EAAET;AAHT,KAIKI,cAJL;AAMD;;AAED,SAAS4B,eAAT,SAGG;AAAA,MAFD7B,cAEC,UAFDA,cAEC;AAAA,MADDC,cACC,UADDA,cACC;AACD,MAAML,GAAG,GAAG,WAAZ;AACA,MAAMC,OAAO,GAAG,CAAhB;;AAEA,MAAMqH,2BAA2B,GAAG9H,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AAClCJ,IAAAA,GAAG,EAAHA,GADkC;AAElCC,IAAAA,OAAO,EAAPA,OAFkC;AAGlCS,IAAAA,KAAK,EAAET;AAH2B,KAI/BI,cAJ+B,EAApC;;AAOA,MAAIiH,2BAAJ,EAAiC;AAC/BZ,IAAAA,sBAAsB,iCAAM0B,0BAA0B,CAAChI,cAAc,EAAf,CAAhC;AACpBC,MAAAA,cAAc;AACZ4H,QAAAA,SAAS,EAAE;AADC,SAET5H,cAFS,CADM;AAKpBD,MAAAA,cAAc,EAAdA;AALoB,OAAtB;AAOD;;AAEDZ,EAAAA,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AACEJ,IAAAA,GAAG,EAAHA,GADF;AAEEC,IAAAA,OAAO,EAAPA,OAFF;AAGES,IAAAA,KAAK,EAAET;AAHT,KAIKI,cAJL;AAMD;;AAED,SAAS6B,eAAT,SAEG;AAAA,MADD9B,cACC,UADDA,cACC;AACDA,EAAAA,cAAc,GAAGmG,iBAAjB,CAAmC,CAAnC,EAAsC,CAAC,GAAG7G,MAAM,CAACsF,QAAX,EAAqB5E,cAAc,EAAnC,EAAuCiF,MAA7E;AACD;;AAED,SAASlD,WAAT,CAAqBkE,OAArB,EAA8B;AAC5B,MAAI,CAAC,GAAG3G,MAAM,CAACkH,gBAAX,EAA6BP,OAAO,CAACjG,cAAR,EAA7B,CAAJ,EAA4D;AAC1D6I,IAAAA,sBAAsB,CAAC5C,OAAD,CAAtB;AACA;AACD;;AAEDC,EAAAA,aAAa,CAAC,GAAD,EAAMD,OAAN,CAAb;AACD;;AAED,SAAS4C,sBAAT,SAGG;AAAA,MAFD7I,cAEC,UAFDA,cAEC;AAAA,MADDC,cACC,UADDA,cACC;AACD,MAAML,GAAG,GAAG,GAAZ;AACA,MAAMC,OAAO,GAAG,EAAhB;;AAEA,MAAMoH,0BAA0B,GAAG7H,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AACjCJ,IAAAA,GAAG,EAAHA,GADiC;AAEjCC,IAAAA,OAAO,EAAPA,OAFiC;AAGjCS,IAAAA,KAAK,EAAET;AAH0B,KAI9BI,cAJ8B,EAAnC;;AAOA,MAAIgH,0BAAJ,EAAgC;AAC9B7H,IAAAA,IAAI,CAACgB,SAAL,CAAe+G,QAAf,CAAwBnH,cAAc,EAAtC;AACEJ,MAAAA,GAAG,EAAHA,GADF;AAEEC,MAAAA,OAAO,EAAPA,OAFF;AAGEuH,MAAAA,QAAQ,EAAEvH;AAHZ,OAIKI,cAJL;AAMD;;AAED,MAAM6I,wBAAwB,GAAG1J,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AAC/BJ,IAAAA,GAAG,EAAHA,GAD+B;AAE/BC,IAAAA,OAAO,EAAPA,OAF+B;AAG/BS,IAAAA,KAAK,EAAET;AAHwB,KAI5BI,cAJ4B,EAAjC;;AAOA,MAAIgH,0BAA0B,IAAI6B,wBAAlC,EAA4D;AAC1D1J,IAAAA,IAAI,CAACgB,SAAL,CAAe4D,KAAf,CAAqBhE,cAAc,EAAnC,oBAA4CC,cAA5C;AAED;AACF;;AAED,SAASuB,eAAT,SAGG;AAAA,MAFDxB,cAEC,UAFDA,cAEC;AAAA,MADDC,cACC,UADDA,cACC;AACD,MAAML,GAAG,GAAG,WAAZ;AACA,MAAMC,OAAO,GAAG,EAAhB;;AAEAT,EAAAA,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AACEJ,IAAAA,GAAG,EAAHA,GADF;AAEEC,IAAAA,OAAO,EAAPA,OAFF;AAGES,IAAAA,KAAK,EAAET;AAHT,KAIKI,cAJL;;AAOAb,EAAAA,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AACEJ,IAAAA,GAAG,EAAHA,GADF;AAEEC,IAAAA,OAAO,EAAPA,OAFF;AAGES,IAAAA,KAAK,EAAET;AAHT,KAIKI,cAJL;AAMD;;AAED,SAASwB,aAAT,SAGG;AAAA,MAFDzB,cAEC,UAFDA,cAEC;AAAA,MADDC,cACC,UADDA,cACC;AACD,MAAML,GAAG,GAAG,SAAZ;AACA,MAAMC,OAAO,GAAG,EAAhB;;AAEAT,EAAAA,IAAI,CAACgB,SAAL,CAAeC,OAAf,CAAuBL,cAAc,EAArC;AACEJ,IAAAA,GAAG,EAAHA,GADF;AAEEC,IAAAA,OAAO,EAAPA,OAFF;AAGES,IAAAA,KAAK,EAAET;AAHT,KAIKI,cAJL;;AAOAb,EAAAA,IAAI,CAACgB,SAAL,CAAeG,KAAf,CAAqBP,cAAc,EAAnC;AACEJ,IAAAA,GAAG,EAAHA,GADF;AAEEC,IAAAA,OAAO,EAAPA,OAFF;AAGES,IAAAA,KAAK,EAAET;AAHT,KAIKI,cAJL;AAMD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.type = type;\nexports.specialCharMap = void 0;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"./utils\");\n\nvar _click = require(\"./click\");\n\nvar _navigationKey = require(\"./keys/navigation-key\");\n\n// TODO: wrap in asyncWrapper\nconst modifierCallbackMap = { ...createModifierCallbackEntries({\n    name: 'shift',\n    key: 'Shift',\n    keyCode: 16,\n    modifierProperty: 'shiftKey'\n  }),\n  ...createModifierCallbackEntries({\n    name: 'ctrl',\n    key: 'Control',\n    keyCode: 17,\n    modifierProperty: 'ctrlKey'\n  }),\n  ...createModifierCallbackEntries({\n    name: 'alt',\n    key: 'Alt',\n    keyCode: 18,\n    modifierProperty: 'altKey'\n  }),\n  ...createModifierCallbackEntries({\n    name: 'meta',\n    key: 'Meta',\n    keyCode: 93,\n    modifierProperty: 'metaKey'\n  }),\n  // capslock is inline because of the need to fire both keydown and keyup on use, while preserving the modifier state.\n  '{capslock}': function capslockOn({\n    currentElement,\n    eventOverrides\n  }) {\n    const newEventOverrides = {\n      modifierCapsLock: true\n    };\n\n    _dom.fireEvent.keyDown(currentElement(), {\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    _dom.fireEvent.keyUp(currentElement(), {\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  },\n  '{/capslock}': function capslockOff({\n    currentElement,\n    eventOverrides\n  }) {\n    const newEventOverrides = {\n      modifierCapsLock: false\n    };\n\n    _dom.fireEvent.keyDown(currentElement(), {\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    _dom.fireEvent.keyUp(currentElement(), {\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }\n};\nconst specialCharMap = {\n  arrowLeft: '{arrowleft}',\n  arrowRight: '{arrowright}',\n  arrowDown: '{arrowdown}',\n  arrowUp: '{arrowup}',\n  enter: '{enter}',\n  escape: '{esc}',\n  delete: '{del}',\n  backspace: '{backspace}',\n  home: '{home}',\n  end: '{end}',\n  selectAll: '{selectall}',\n  space: '{space}',\n  whitespace: ' '\n};\nexports.specialCharMap = specialCharMap;\nconst specialCharCallbackMap = {\n  [specialCharMap.arrowLeft]: (0, _navigationKey.navigationKey)('ArrowLeft'),\n  [specialCharMap.arrowRight]: (0, _navigationKey.navigationKey)('ArrowRight'),\n  [specialCharMap.arrowDown]: handleArrowDown,\n  [specialCharMap.arrowUp]: handleArrowUp,\n  [specialCharMap.home]: (0, _navigationKey.navigationKey)('Home'),\n  [specialCharMap.end]: (0, _navigationKey.navigationKey)('End'),\n  [specialCharMap.enter]: handleEnter,\n  [specialCharMap.escape]: handleEsc,\n  [specialCharMap.delete]: handleDel,\n  [specialCharMap.backspace]: handleBackspace,\n  [specialCharMap.selectAll]: handleSelectall,\n  [specialCharMap.space]: handleSpace,\n  [specialCharMap.whitespace]: handleSpace\n};\n\nfunction wait(time) {\n  return new Promise(resolve => setTimeout(() => resolve(), time));\n} // this needs to be wrapped in the event/asyncWrapper for React's act and angular's change detection\n// depending on whether it will be async.\n\n\nasync function type(element, text, {\n  delay = 0,\n  ...options\n} = {}) {\n  // we do not want to wrap in the asyncWrapper if we're not\n  // going to actually be doing anything async, so we only wrap\n  // if the delay is greater than 0\n  let result;\n\n  if (delay > 0) {\n    await (0, _dom.getConfig)().asyncWrapper(async () => {\n      result = await typeImpl(element, text, {\n        delay,\n        ...options\n      });\n    });\n  } else {\n    result = typeImpl(element, text, {\n      delay,\n      ...options\n    });\n  }\n\n  return result;\n}\n\nasync function typeImpl(element, text, {\n  delay,\n  skipClick = false,\n  skipAutoClose = false,\n  initialSelectionStart,\n  initialSelectionEnd\n}) {\n  if (element.disabled) return;\n  if (!skipClick) (0, _click.click)(element);\n\n  if ((0, _utils.isContentEditable)(element) && document.getSelection().rangeCount === 0) {\n    const range = document.createRange();\n    range.setStart(element, 0);\n    range.setEnd(element, 0);\n    document.getSelection().addRange(range);\n  } // The focused element could change between each event, so get the currently active element each time\n\n\n  const currentElement = () => (0, _utils.getActiveElement)(element.ownerDocument); // by default, a new element has it's selection start and end at 0\n  // but most of the time when people call \"type\", they expect it to type\n  // at the end of the current input value. So, if the selection start\n  // and end are both the default of 0, then we'll go ahead and change\n  // them to the length of the current value.\n  // the only time it would make sense to pass the initialSelectionStart or\n  // initialSelectionEnd is if you have an input with a value and want to\n  // explicitely start typing with the cursor at 0. Not super common.\n\n\n  const value = (0, _utils.getValue)(currentElement());\n  const {\n    selectionStart,\n    selectionEnd\n  } = (0, _utils.getSelectionRange)(element);\n\n  if (value != null && selectionStart === 0 && selectionEnd === 0) {\n    (0, _utils.setSelectionRangeIfNecessary)(currentElement(), initialSelectionStart != null ? initialSelectionStart : value.length, initialSelectionEnd != null ? initialSelectionEnd : value.length);\n  }\n\n  const eventCallbacks = queueCallbacks();\n  await runCallbacks(eventCallbacks);\n\n  function queueCallbacks() {\n    const callbacks = [];\n    let remainingString = text;\n\n    while (remainingString) {\n      const {\n        callback,\n        remainingString: newRemainingString\n      } = getNextCallback(remainingString, skipAutoClose);\n      callbacks.push(callback);\n      remainingString = newRemainingString;\n    }\n\n    return callbacks;\n  }\n\n  async function runCallbacks(callbacks) {\n    const eventOverrides = {};\n    let prevWasMinus, prevWasPeriod, prevValue, typedValue;\n\n    for (const callback of callbacks) {\n      if (delay > 0) await wait(delay);\n\n      if (!currentElement().disabled) {\n        const returnValue = callback({\n          currentElement,\n          prevWasMinus,\n          prevWasPeriod,\n          prevValue,\n          eventOverrides,\n          typedValue\n        });\n        Object.assign(eventOverrides, returnValue == null ? void 0 : returnValue.eventOverrides);\n        prevWasMinus = returnValue == null ? void 0 : returnValue.prevWasMinus;\n        prevWasPeriod = returnValue == null ? void 0 : returnValue.prevWasPeriod;\n        prevValue = returnValue == null ? void 0 : returnValue.prevValue;\n        typedValue = returnValue == null ? void 0 : returnValue.typedValue;\n      }\n    }\n  }\n}\n\nfunction getNextCallback(remainingString, skipAutoClose) {\n  const modifierCallback = getModifierCallback(remainingString, skipAutoClose);\n\n  if (modifierCallback) {\n    return modifierCallback;\n  }\n\n  const specialCharCallback = getSpecialCharCallback(remainingString);\n\n  if (specialCharCallback) {\n    return specialCharCallback;\n  }\n\n  return getTypeCallback(remainingString);\n}\n\nfunction getModifierCallback(remainingString, skipAutoClose) {\n  const modifierKey = Object.keys(modifierCallbackMap).find(key => remainingString.startsWith(key));\n\n  if (!modifierKey) {\n    return null;\n  }\n\n  const callback = modifierCallbackMap[modifierKey]; // if this modifier has an associated \"close\" callback and the developer\n  // doesn't close it themselves, then we close it for them automatically\n  // Effectively if they send in: '{alt}a' then we type: '{alt}a{/alt}'\n\n  if (!skipAutoClose && callback.closeName && !remainingString.includes(callback.closeName)) {\n    remainingString += callback.closeName;\n  }\n\n  remainingString = remainingString.slice(modifierKey.length);\n  return {\n    callback,\n    remainingString\n  };\n}\n\nfunction getSpecialCharCallback(remainingString) {\n  const specialChar = Object.keys(specialCharCallbackMap).find(key => remainingString.startsWith(key));\n\n  if (!specialChar) {\n    return null;\n  }\n\n  return {\n    callback: specialCharCallbackMap[specialChar],\n    remainingString: remainingString.slice(specialChar.length)\n  };\n}\n\nfunction getTypeCallback(remainingString) {\n  const character = remainingString[0];\n\n  const callback = context => typeCharacter(character, context);\n\n  return {\n    callback,\n    remainingString: remainingString.slice(1)\n  };\n}\n\nfunction setSelectionRange({\n  currentElement,\n  newValue,\n  newSelectionStart\n}) {\n  // if we *can* change the selection start, then we will if the new value\n  // is the same as the current value (so it wasn't programatically changed\n  // when the fireEvent.input was triggered).\n  // The reason we have to do this at all is because it actually *is*\n  // programmatically changed by fireEvent.input, so we have to simulate the\n  // browser's default behavior\n  const value = (0, _utils.getValue)(currentElement());\n\n  if (value === newValue) {\n    (0, _utils.setSelectionRangeIfNecessary)(currentElement(), newSelectionStart, newSelectionStart);\n  } else {\n    // If the currentValue is different than the expected newValue and we *can*\n    // change the selection range, than we should set it to the length of the\n    // currentValue to ensure that the browser behavior is mimicked.\n    (0, _utils.setSelectionRangeIfNecessary)(currentElement(), value.length, value.length);\n  }\n}\n\nfunction fireInputEventIfNeeded({\n  currentElement,\n  newValue,\n  newSelectionStart,\n  eventOverrides\n}) {\n  const prevValue = (0, _utils.getValue)(currentElement());\n\n  if (!currentElement().readOnly && !(0, _utils.isClickableInput)(currentElement()) && newValue !== prevValue) {\n    if ((0, _utils.isContentEditable)(currentElement())) {\n      _dom.fireEvent.input(currentElement(), {\n        target: {\n          textContent: newValue\n        },\n        ...eventOverrides\n      });\n    } else {\n      _dom.fireEvent.input(currentElement(), {\n        target: {\n          value: newValue\n        },\n        ...eventOverrides\n      });\n    }\n\n    setSelectionRange({\n      currentElement,\n      newValue,\n      newSelectionStart\n    });\n  }\n\n  return {\n    prevValue\n  };\n}\n\nfunction typeCharacter(char, {\n  currentElement,\n  prevWasMinus = false,\n  prevWasPeriod = false,\n  prevValue = '',\n  typedValue = '',\n  eventOverrides\n}) {\n  const key = char; // TODO: check if this also valid for characters with diacritic markers e.g. úé etc\n\n  const keyCode = char.charCodeAt(0);\n  let nextPrevWasMinus, nextPrevWasPeriod;\n  const textToBeTyped = typedValue + char;\n\n  const keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyDownDefaultNotPrevented) {\n    const keyPressDefaultNotPrevented = _dom.fireEvent.keyPress(currentElement(), {\n      key,\n      keyCode,\n      charCode: keyCode,\n      ...eventOverrides\n    });\n\n    if ((0, _utils.getValue)(currentElement()) != null && keyPressDefaultNotPrevented) {\n      let newEntry = char;\n\n      if (prevWasMinus) {\n        newEntry = `-${char}`;\n      } else if (prevWasPeriod) {\n        newEntry = `${prevValue}.${char}`;\n      }\n\n      if ((0, _utils.isValidDateValue)(currentElement(), textToBeTyped)) {\n        newEntry = textToBeTyped;\n      }\n\n      const timeNewEntry = (0, _utils.buildTimeValue)(textToBeTyped);\n\n      if ((0, _utils.isValidInputTimeValue)(currentElement(), timeNewEntry)) {\n        newEntry = timeNewEntry;\n      }\n\n      const inputEvent = fireInputEventIfNeeded({ ...(0, _utils.calculateNewValue)(newEntry, currentElement()),\n        eventOverrides: {\n          data: key,\n          inputType: 'insertText',\n          ...eventOverrides\n        },\n        currentElement\n      });\n      prevValue = inputEvent.prevValue;\n\n      if ((0, _utils.isValidDateValue)(currentElement(), textToBeTyped)) {\n        _dom.fireEvent.change(currentElement(), {\n          target: {\n            value: textToBeTyped\n          }\n        });\n      }\n\n      fireChangeForInputTimeIfValid(currentElement, prevValue, timeNewEntry); // typing \"-\" into a number input will not actually update the value\n      // so for the next character we type, the value should be set to\n      // `-${newEntry}`\n      // we also preserve the prevWasMinus when the value is unchanged due\n      // to typing an invalid character (typing \"-a3\" results in \"-3\")\n      // same applies for the decimal character.\n\n      if (currentElement().type === 'number') {\n        const newValue = (0, _utils.getValue)(currentElement());\n\n        if (newValue === prevValue && newEntry !== '-') {\n          nextPrevWasMinus = prevWasMinus;\n        } else {\n          nextPrevWasMinus = newEntry === '-';\n        }\n\n        if (newValue === prevValue && newEntry !== '.') {\n          nextPrevWasPeriod = prevWasPeriod;\n        } else {\n          nextPrevWasPeriod = newEntry === '.';\n        }\n      }\n    }\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  return {\n    prevWasMinus: nextPrevWasMinus,\n    prevWasPeriod: nextPrevWasPeriod,\n    prevValue,\n    typedValue: textToBeTyped\n  };\n}\n\nfunction fireChangeForInputTimeIfValid(currentElement, prevValue, timeNewEntry) {\n  if ((0, _utils.isValidInputTimeValue)(currentElement(), timeNewEntry) && prevValue !== timeNewEntry) {\n    _dom.fireEvent.change(currentElement(), {\n      target: {\n        value: timeNewEntry\n      }\n    });\n  }\n} // yes, calculateNewBackspaceValue and calculateNewValue look extremely similar\n// and you may be tempted to create a shared abstraction.\n// If you, brave soul, decide to so endevor, please increment this count\n// when you inevitably fail: 1\n\n\nfunction calculateNewBackspaceValue(element) {\n  const {\n    selectionStart,\n    selectionEnd\n  } = (0, _utils.getSelectionRange)(element);\n  const value = (0, _utils.getValue)(element);\n  let newValue, newSelectionStart;\n\n  if (selectionStart === null) {\n    // at the end of an input type that does not support selection ranges\n    // https://github.com/testing-library/user-event/issues/316#issuecomment-639744793\n    newValue = value.slice(0, value.length - 1);\n    newSelectionStart = selectionStart - 1;\n  } else if (selectionStart === selectionEnd) {\n    if (selectionStart === 0) {\n      // at the beginning of the input\n      newValue = value;\n      newSelectionStart = selectionStart;\n    } else if (selectionStart === value.length) {\n      // at the end of the input\n      newValue = value.slice(0, value.length - 1);\n      newSelectionStart = selectionStart - 1;\n    } else {\n      // in the middle of the input\n      newValue = value.slice(0, selectionStart - 1) + value.slice(selectionEnd);\n      newSelectionStart = selectionStart - 1;\n    }\n  } else {\n    // we have something selected\n    const firstPart = value.slice(0, selectionStart);\n    newValue = firstPart + value.slice(selectionEnd);\n    newSelectionStart = firstPart.length;\n  }\n\n  return {\n    newValue,\n    newSelectionStart\n  };\n}\n\nfunction calculateNewDeleteValue(element) {\n  const {\n    selectionStart,\n    selectionEnd\n  } = (0, _utils.getSelectionRange)(element);\n  const value = (0, _utils.getValue)(element);\n  let newValue;\n\n  if (selectionStart === null) {\n    // at the end of an input type that does not support selection ranges\n    // https://github.com/testing-library/user-event/issues/316#issuecomment-639744793\n    newValue = value;\n  } else if (selectionStart === selectionEnd) {\n    if (selectionStart === 0) {\n      // at the beginning of the input\n      newValue = value.slice(1);\n    } else if (selectionStart === value.length) {\n      // at the end of the input\n      newValue = value;\n    } else {\n      // in the middle of the input\n      newValue = value.slice(0, selectionStart) + value.slice(selectionEnd + 1);\n    }\n  } else {\n    // we have something selected\n    const firstPart = value.slice(0, selectionStart);\n    newValue = firstPart + value.slice(selectionEnd);\n  }\n\n  return {\n    newValue,\n    newSelectionStart: selectionStart\n  };\n}\n\nfunction createModifierCallbackEntries({\n  name,\n  key,\n  keyCode,\n  modifierProperty\n}) {\n  const openName = `{${name}}`;\n  const closeName = `{/${name}}`;\n\n  function open({\n    currentElement,\n    eventOverrides\n  }) {\n    const newEventOverrides = {\n      [modifierProperty]: true\n    };\n\n    _dom.fireEvent.keyDown(currentElement(), {\n      key,\n      keyCode,\n      which: keyCode,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }\n\n  open.closeName = closeName;\n\n  function close({\n    currentElement,\n    eventOverrides\n  }) {\n    const newEventOverrides = {\n      [modifierProperty]: false\n    };\n\n    _dom.fireEvent.keyUp(currentElement(), {\n      key,\n      keyCode,\n      which: keyCode,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }\n\n  return {\n    [openName]: open,\n    [closeName]: close\n  };\n}\n\nfunction handleEnter({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'Enter';\n  const keyCode = 13;\n\n  const keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyDownDefaultNotPrevented) {\n    const keyPressDefaultNotPrevented = _dom.fireEvent.keyPress(currentElement(), {\n      key,\n      keyCode,\n      charCode: keyCode,\n      ...eventOverrides\n    });\n\n    if (keyPressDefaultNotPrevented) {\n      if ((0, _utils.isClickableInput)(currentElement()) || // Links with href defined should handle Enter the same as a click\n      (0, _utils.isInstanceOfElement)(currentElement(), 'HTMLAnchorElement') && currentElement().href) {\n        _dom.fireEvent.click(currentElement(), { ...eventOverrides\n        });\n      }\n\n      if (currentElement().tagName === 'TEXTAREA') {\n        const {\n          newValue,\n          newSelectionStart\n        } = (0, _utils.calculateNewValue)('\\n', currentElement());\n\n        _dom.fireEvent.input(currentElement(), {\n          target: {\n            value: newValue\n          },\n          inputType: 'insertLineBreak',\n          ...eventOverrides\n        });\n\n        setSelectionRange({\n          currentElement,\n          newValue,\n          newSelectionStart\n        });\n      }\n\n      if (currentElement().tagName === 'INPUT' && currentElement().form && (currentElement().form.querySelectorAll('input').length === 1 || currentElement().form.querySelector('input[type=\"submit\"]') || currentElement().form.querySelector('button[type=\"submit\"]'))) {\n        _dom.fireEvent.submit(currentElement().form);\n      }\n    }\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}\n\nfunction handleEsc({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'Escape';\n  const keyCode = 27;\n\n  _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  }); // NOTE: Browsers do not fire a keypress on meta key presses\n\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}\n\nfunction handleDel({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'Delete';\n  const keyCode = 46;\n\n  const keyPressDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyPressDefaultNotPrevented) {\n    fireInputEventIfNeeded({ ...calculateNewDeleteValue(currentElement()),\n      eventOverrides: {\n        inputType: 'deleteContentForward',\n        ...eventOverrides\n      },\n      currentElement\n    });\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}\n\nfunction handleBackspace({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'Backspace';\n  const keyCode = 8;\n\n  const keyPressDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyPressDefaultNotPrevented) {\n    fireInputEventIfNeeded({ ...calculateNewBackspaceValue(currentElement()),\n      eventOverrides: {\n        inputType: 'deleteContentBackward',\n        ...eventOverrides\n      },\n      currentElement\n    });\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}\n\nfunction handleSelectall({\n  currentElement\n}) {\n  currentElement().setSelectionRange(0, (0, _utils.getValue)(currentElement()).length);\n}\n\nfunction handleSpace(context) {\n  if ((0, _utils.isClickableInput)(context.currentElement())) {\n    handleSpaceOnClickable(context);\n    return;\n  }\n\n  typeCharacter(' ', context);\n}\n\nfunction handleSpaceOnClickable({\n  currentElement,\n  eventOverrides\n}) {\n  const key = ' ';\n  const keyCode = 32;\n\n  const keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyDownDefaultNotPrevented) {\n    _dom.fireEvent.keyPress(currentElement(), {\n      key,\n      keyCode,\n      charCode: keyCode,\n      ...eventOverrides\n    });\n  }\n\n  const keyUpDefaultNotPrevented = _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyDownDefaultNotPrevented && keyUpDefaultNotPrevented) {\n    _dom.fireEvent.click(currentElement(), { ...eventOverrides\n    });\n  }\n}\n\nfunction handleArrowDown({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'ArrowDown';\n  const keyCode = 40;\n\n  _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}\n\nfunction handleArrowUp({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'ArrowUp';\n  const keyCode = 38;\n\n  _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}"]},"metadata":{},"sourceType":"script"}